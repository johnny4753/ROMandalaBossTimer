<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>RO守護永恆 - 刷珍稀曼陀羅計時器</title>
    <script src="./library/vue.js"></script>
    <script src="./library/moment.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div id="app" class="container-fluid">
        <time-count-bar :is-focus="selectBarId == bar.id" @click.native="selectBarId = bar.id" v-for="bar in bars" :key="bar.id">
        </time-count-bar>
    </div>

    <script>
        Vue.component('time-count-bar', {
            props: {
                isFocus: Boolean
            },
            template: `
        <div :class="{'bg-success' : isFocus}">
            界線：<input placeholder="ex:1a" maxlength="3" size="2">
            死亡時間： <input v-model="inputTime" placeholder="{hour}:{min}" maxlength="5" size="10">
            <button @click="add90Min">Add 1.5 hr</button>
            再生時間：{{resultTime}}
            <button @click="updateInputTime">再生時間→死亡時間</button>
        </div>
        `,
            data() {
                return {
                    inputTime: '',
                    resultTime: ''
                }
            },
            methods: {
                add90Min() {
                    var hrMinArray = this.inputTime.split(":");
                    var hour = hrMinArray[0];
                    var minute = hrMinArray[1];
                    var d = new Date(2017, 11, 19, hour, minute);
                    var newDateObj = moment(d).add(90, 'm');
                    this.resultTime = this.formatDate(newDateObj.toDate());
                },
                formatDate(date) {
                    var hours = date.getHours();
                    var minutes = date.getMinutes();

                    return hours + ':' + minutes;
                },
                updateInputTime() {
                    this.inputTime = this.resultTime;
                }
            }
        })

        var app = new Vue({
            el: '#app',
            data: {
                bars: [
                    { id: 1 },
                    { id: 2 },
                    { id: 3 }
                ],
                selectBarId: ''
            },
            methods: {

            },
            computed: {

            }
        })
    </script>
</body>

</html>